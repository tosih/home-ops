cluster:
  allowSchedulingOnControlPlanes: true
  apiServer:
    extraArgs:
      # https://kubernetes.io/docs/tasks/extend-kubernetes/configure-aggregation-layer/
      enable-aggregator-routing: true
      #% if oidc_issuer_url %#
      # OIDC authentication via Pocket ID
      oidc-issuer-url: "#{ oidc_issuer_url }#"
      #% endif %#
      #% if oidc_client_id %#
      oidc-client-id: "#{ oidc_client_id }#"
      #% endif %#
      #% if oidc_username_claim %#
      oidc-username-claim: "#{ oidc_username_claim }#"
      #% endif %#
      #% if oidc_groups_claim %#
      oidc-groups-claim: "#{ oidc_groups_claim }#"
      #% endif %#
      #% if oidc_groups_prefix %#
      oidc-groups-prefix: "#{ oidc_groups_prefix }#"
      #% endif %#
  controllerManager:
    extraArgs:
      bind-address: 0.0.0.0
  coreDNS:
    disabled: true
  etcd:
    extraArgs:
      listen-metrics-urls: http://0.0.0.0:2381
    advertisedSubnets:
      - #{ node_cidr }#
  proxy:
    disabled: true
  scheduler:
    extraArgs:
      bind-address: 0.0.0.0
