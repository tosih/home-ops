---
# Restic repository secret for Volsync backups
# This secret contains S3 credentials and restic password
apiVersion: v1
kind: Secret
metadata:
  name: memos-restic-secret
  namespace: cloud
type: Opaque
stringData:
  # S3 endpoint for Rook-Ceph object storage
  RESTIC_REPOSITORY: "s3:http://rook-ceph-rgw-ceph-objectstore.rook-ceph.svc:80/volsync-backups/memos"
  
  # Restic encryption password (change this!)
  RESTIC_PASSWORD: "CHANGE-ME-TO-A-SECURE-PASSWORD"
  
  # S3 credentials - these will be populated from the CephObjectStoreUser
  # After deployment, update with:
  # kubectl -n cloud create secret generic memos-restic-secret \
  #   --from-literal=RESTIC_REPOSITORY="s3:http://rook-ceph-rgw-ceph-objectstore.rook-ceph.svc:80/volsync-backups/memos" \
  #   --from-literal=RESTIC_PASSWORD="your-secure-password" \
  #   --from-literal=AWS_ACCESS_KEY_ID="$(kubectl -n rook-ceph get secret rook-ceph-object-user-ceph-objectstore-volsync-backup -o jsonpath='{.data.AccessKey}' | base64 -d)" \
  #   --from-literal=AWS_SECRET_ACCESS_KEY="$(kubectl -n rook-ceph get secret rook-ceph-object-user-ceph-objectstore-volsync-backup -o jsonpath='{.data.SecretKey}' | base64 -d)" \
  #   --dry-run=client -o yaml | kubectl apply -f -
  AWS_ACCESS_KEY_ID: "placeholder"
  AWS_SECRET_ACCESS_KEY: "placeholder"
