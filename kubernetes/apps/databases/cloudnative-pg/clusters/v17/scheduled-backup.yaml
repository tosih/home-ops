---
apiVersion: postgresql.cnpg.io/v1
kind: ScheduledBackup
metadata:
  name: postgres17-daily-backup
  namespace: databases
spec:
  # Daily backup at 2 AM
  schedule: "0 2 * * *"
  
  # Backup immediately on schedule
  immediate: true
  
  # Suspend backups (set to false to enable)
  suspend: false
  
  # Reference to the cluster
  cluster:
    name: postgres17
  
  # Backup method
  method: barmanObjectStore
  
  # Target for backups (prefer standby to reduce load on primary)
  target: prefer-standby
  
  # Backup owner reference
  backupOwnerReference: self
